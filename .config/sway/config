
# Appearance
output * bg #101010 solid_color
default_border pixel 2
default_floating_border pixel 2
gaps inner 2
gaps outer 2
font Terminus (TTF) 12
# TODO: remove indicator training wheels when comfortable
client.focused           #202020 #ffffff #000000 #ff0000 #ffffff
client.focused_inactive  #202020 #202020 #ffffff #202020 #202020
client.focused_tab_title #202020 #ffffff #000000 #202020 #ffffff
client.unfocused         #202020 #202020 #808080 #202020 #202020

# Program shortcuts
bindsym Mod4+Space exec launcher
bindsym Mod4+Return exec $TERMINAL
bindsym Mod4+w exec $BROWSER

# Windows
focus_wrapping no
bindsym Mod4+h focus left
bindsym Mod4+j focus down
bindsym Mod4+k focus up
bindsym Mod4+l focus right
bindsym Mod4+Shift+h move left
bindsym Mod4+Shift+j move down
bindsym Mod4+Shift+k move up
bindsym Mod4+Shift+l move right
bindsym Mod4+Control+h resize shrink width 50px
bindsym Mod4+Control+j resize grow height 50px
bindsym Mod4+Control+k resize shrink height 50px
bindsym Mod4+Control+l resize grow width 50px
bindsym Mod4+f focus mode_toggle
bindsym Mod4+Shift+f floating toggle
bindsym Mod4+x floating true; sticky toggle
bindsym Mod4+m fullscreen
bindsym Mod4+q kill

# Workspaces
# TODO: get used to i3 multihead workspaces
# - moving workspaces around and between outputs (auto renaming?)
bindsym Mod4+1 workspace number 1
bindsym Mod4+2 workspace number 2
bindsym Mod4+3 workspace number 3
bindsym Mod4+4 workspace number 4
bindsym Mod4+5 workspace number 5
bindsym Mod4+6 workspace number 6
bindsym Mod4+7 workspace number 7
bindsym Mod4+8 workspace number 8
bindsym Mod4+9 workspace number 9
bindsym Mod4+0 workspace number 10
bindsym Mod4+Shift+1 move container workspace number 1; workspace 1
bindsym Mod4+Shift+2 move container workspace number 2; workspace 2
bindsym Mod4+Shift+3 move container workspace number 3; workspace 3
bindsym Mod4+Shift+4 move container workspace number 4; workspace 4
bindsym Mod4+Shift+5 move container workspace number 5; workspace 5
bindsym Mod4+Shift+6 move container workspace number 6; workspace 6
bindsym Mod4+Shift+7 move container workspace number 7; workspace 7
bindsym Mod4+Shift+8 move container workspace number 8; workspace 8
bindsym Mod4+Shift+9 move container workspace number 9; workspace 9
bindsym Mod4+Shift+0 move container workspace number 10; workspace 10
bindsym Mod4+Control+1 move container workspace number 1
bindsym Mod4+Control+2 move container workspace number 2
bindsym Mod4+Control+3 move container workspace number 3
bindsym Mod4+Control+4 move container workspace number 4
bindsym Mod4+Control+5 move container workspace number 5
bindsym Mod4+Control+6 move container workspace number 6
bindsym Mod4+Control+7 move container workspace number 7
bindsym Mod4+Control+8 move container workspace number 8
bindsym Mod4+Control+9 move container workspace number 9
bindsym Mod4+Control+0 move container workspace number 10
bindsym Mod4+Comma          exec "n=$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) - 1 )); n=$(( $n < 1 ? 1 : ($n < 10 ? $n : 10) )); swaymsg workspace $n"
bindsym Mod4+Period         exec "n=$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) + 1 )); n=$(( $n < 1 ? 1 : ($n < 10 ? $n : 10) )); swaymsg workspace $n"
bindsym Mod4+Shift+Comma    exec "n=$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) - 1 )); n=$(( $n < 1 ? 1 : ($n < 10 ? $n : 10) )); swaymsg move container workspace $n; swaymsg workspace $n"
bindsym Mod4+Shift+Period   exec "n=$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) + 1 )); n=$(( $n < 1 ? 1 : ($n < 10 ? $n : 10) )); swaymsg move container workspace $n; swaymsg workspace $n"
bindsym Mod4+Control+Comma  exec "n=$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) - 1 )); n=$(( $n < 1 ? 1 : ($n < 10 ? $n : 10) )); swaymsg move container workspace $n"
bindsym Mod4+Control+Period exec "n=$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) + 1 )); n=$(( $n < 1 ? 1 : ($n < 10 ? $n : 10) )); swaymsg move container workspace $n"
bindsym Mod4+z         exec "n=$(swaymsg -rt get_workspaces | jq '. as $w | first(range($w[] | select(.focused).num; 10) + 1 | select(all(. != $w[].num; .)))'); swaymsg workspace $n"
bindsym Mod4+Shift+z   exec "n=$(swaymsg -rt get_workspaces | jq '. as $w | first(range($w[] | select(.focused).num; 10) + 1 | select(all(. != $w[].num; .)))'); swaymsg move container workspace $n; swaymsg workspace $n"
bindsym Mod4+Control+z exec "n=$(swaymsg -rt get_workspaces | jq '. as $w | first(range($w[] | select(.focused).num; 10) + 1 | select(all(. != $w[].num; .)))'); swaymsg move container workspace $n"

# Layout
default_orientation auto
bindsym Mod4+g       focus parent
bindsym Mod4+Shift+g focus child
bindsym Mod4+p       split vertical
bindsym Mod4+Shift+p split none
bindsym Mod4+o       layout toggle splitv splith
bindsym Mod4+Shift+o layout toggle split tabbed

# Scratchpads
bindsym Mod4+minus scratchpad show
bindsym Mod4+Shift+minus move scratchpad
# bindsym Mod4+c [instance="TODO"] scratchpad show

# Mouse
floating_modifier Mod4 normal
bindgesture swipe:right exec "n=$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) - 1 )); n=$(( $n < 1 ? 1 : ($n < 10 ? $n : 10) )); swaymsg workspace $n"
bindgesture swipe:left  exec "n=$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) + 1 )); n=$(( $n < 1 ? 1 : ($n < 10 ? $n : 10) )); swaymsg workspace $n"
mouse_warping output

# Bar
# TODO: replace/incorporate with eww
bar {
    mode hide
    position top
    font Terminus (TTF) 12
    status_command 'while printf "%s %s%% \n" "$(date +"%m/%d %H:%M")" "$(cat /sys/class/power_supply/BAT0/capacity)"; do sleep 1; done'
    colors {
        background #101010
        statusline #808080
        focused_workspace  #101010 #ffffff #000000
        active_workspace   #101010 #ffffff #000000
        inactive_workspace #101010 #101010 #808080
        urgent_workspace   #101010 #808080 #ffffff
    }
}

# Input devices
input type:keyboard {
    xkb_layout ie
    xkb_options caps:escape
    repeat_delay 250
    repeat_rate 30
}
input type:touchpad {
    dwt disabled
    tap enabled
    natural_scroll enabled
    click_method clickfinger
    scroll_method two_finger
}

# TODO: move to display menu
output eDP-1 pos 0 0
workspace 1 output eDP-1
workspace 2 output HDMI-A-1
workspace 3 output eDP-1
workspace 4 output HDMI-A-1
workspace 5 output eDP-1
workspace 6 output HDMI-A-1
workspace 7 output eDP-1
workspace 8 output HDMI-A-1
workspace 9 output eDP-1
workspace 10 output HDMI-A-1

# TODO: move to power menu
bindsym Mod5+Shift+c reload
bindsym Mod4+Shift+e exit

# TODO: fix permissions
# exec swayidle -w \
#     timeout 300 'swaymsg "output * power off"'\
#         resume 'swaymsg "output * power on"' \
#     timeout 600 'swaylock -f -c 000000' \
#     before-sleep 'swaylock -f -c 000000'
# swaylock --indicator-radius 25 --indicator-thickness 8 --indicator-y-position 900 --color 000000 --bs-hl-color ffffff --inside-color 00000000 --inside-clear-color 00000000 --inside-wrong-color 00000000 --inside-ver-color 00000000 --key-hl-color ffffff --ring-color 00000000 --ring-clear-color 00000000 --ring-ver-color ff00ff --ring-wrong-color ff0000 --separator-color 00000000 --text-color 00000000 --text-clear-color 00000000 --text-ver-color 00000000 --text-wrong-color 00000000
