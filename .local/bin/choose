#!/bin/sh

lines="$CH_LINES"
width="$CH_WIDTH"
prompt="$CH_PROMPT"
custom="$CH_CUSTOM"

[ -z "$lines" ] && lines="16"
[ -z "$width" ] && width="50%"

while true; do
	choice="$(printf "%s\n" $@ | wofi --cache-file /dev/null --dmenu --insensitive --lines "$lines" --width "$width" --prompt "$prompt")"
	[ -n "$custom" ] || [ -z "$choice" ] || { for option in $@; do [ "$choice" = "$option" ] && break; done; } && break
done

echo "$choice"
