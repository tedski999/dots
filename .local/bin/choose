#!/usr/bin/env fish

# Prompt user to choose from several provided options
# Dependencies: dmenu

argparse --name (status basename) "p=" "l=" "c" -- $argv; or exit 1
not set --query _flag_p; and set _flag_p ""
not set --query _flag_l; and set _flag_l 16

while true
	set r (printf "%s\n" $argv | dmenu -i -l $_flag_l -p $_flag_p)
	test -z $r || test -n "$_flag_c" || contains $r $argv
	and echo $r
	and exit 0
end
