#!/bin/sh

swaymsg -rt get_outputs | jq -r ".[].name" | {
	read mon0
	read mon1

	choice="$1"
	[ -z "$choice" ] && {
		[ -n "$mon1" ] && choices="auto mono duel" || choices="auto mono"
		choice="$(CH_LINES=6 CH_WIDTH=100 CH_PROMPT="Display Control" choose $choices)"
	}
	[ "$choice" = "auto" ] && {
		[ -n "$mon1" ] && choice="duel" || choices="mono"
	}

	case "$choice" in
		"mono")
			swaymsg output "$mon0" enable pos 0 0
			swaymsg output "$mon1" disable
			;;
		"duel")
			swaymsg output "$mon0" enable pos 0 1080
			swaymsg output "$mon1" enable pos 0 0
			;;
		"*")
			return 1
			;;
	esac

	# TODO: rename all workspaces to match monitor id, move focus to appropriate workspace
	#exec $get_output && swaymsg "workspace ${n}1:1"
}
