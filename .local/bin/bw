#!/bin/sh

for bin in $(realpath $(which -a bw)); do
	[ "$(realpath $0)" != "$bin" ] && [ -x "$bin" ] && exec "$bin" "$@"
done

opt="$HOME/.local/opt/bw"; bin="$opt/bw"; src="https://vault.bitwarden.com/download/?app=cli&platform=linux"

[ -d "$opt" ] || { mkdir -p "$opt" && curl -fL "$src" > "$opt/bw.zip" && unzip "$opt/bw.zip" -d "$opt"; } || { rm -r "$opt"; exit 1; }

exec "$bin" "$@"
